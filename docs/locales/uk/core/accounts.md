---
sidebarSortOrder: 1
sidebarLabel: Модель облікових записів Solana
title: Модель облікових записів Solana
description:
  Дізнайтеся про модель облікових записів Solana, включаючи те, як облікові
  записи зберігають дані і програми, механіку оренди, власність облікових
  записів і взаємозв'язок між програмами та обліковими записами даних.
  Зрозумійте основні концепції системи зберігання ключ-значення Solana.
---

У Solana всі дані зберігаються в так званих "облікових записах". Спосіб
організації даних у Solana нагадує
[сховище ключ-значення](https://uk.wikipedia.org/wiki/%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%B8%D1%85_%C2%AB%D0%BA%D0%BB%D1%8E%D1%87%E2%80%94%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%BD%D1%8F%C2%BB),
де кожен запис у базі даних називається "обліковим записом".

![Облікові записи](/assets/docs/core/accounts/accounts.svg)

## Основні моменти

- Облікові записи можуть зберігати до 10 МБ даних, які можуть складатися з
  виконуваного коду програми або стану програми.

- Облікові записи потребують застави в SOL, пропорційної обсягу збережених
  даних, яка повністю повертається при закритті облікового запису.

- Кожен обліковий запис має "власника" програми. Тільки програма, яка володіє
  обліковим записом, може змінювати його дані або знімати баланс лампортів.
  Однак будь-хто може збільшити баланс.

- Програми (смартконтракти) є безстанними обліковими записами, які зберігають
  виконуваний код.

- Облікові записи даних створюються програмами для зберігання і керування станом
  програми.

- Вбудовані програми - це вбудовані програми, які включені у середовище
  виконання Solana.

- Системні облікові записи - це спеціальні облікові записи, які зберігають стан
  кластера мережі.

## Обліковий запис

Кожен обліковий запис ідентифікується його унікальною адресою, представленою у
форматі 32 байт як [Ed25519](https://ed25519.cr.yp.to/) `PublicKey`. Ви можете
вважати адресу унікальним ідентифікатором облікового запису.

![Адреса облікового запису](/assets/docs/core/accounts/account-address.svg)

Цей зв'язок між обліковим записом та його адресою можна розглядати як пару
ключ-значення, де адреса є ключем для пошуку відповідних даних облікового запису
в ланцюжку.

### AccountInfo

Облікові записи мають
[максимальний розмір у 10 МБ](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/sdk/program/src/system_instruction.rs#L85)
(10 мегабайт), а дані, що зберігаються в кожному обліковому записі Solana, мають
наступну структуру, відому як
[AccountInfo](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/sdk/program/src/account_info.rs#L19).

![AccountInfo](/assets/docs/core/accounts/accountinfo.svg)

`AccountInfo` для кожного облікового запису включає наступні поля:

- `data`: Масив байтів, який зберігає стан облікового запису. Якщо обліковий
  запис є програмою (смартконтрактом), це поле зберігає виконуваний код
  програми. Це поле часто називають "даними облікового запису".
- `executable`: Булевий прапорець, який вказує, чи є обліковий запис програмою.
- `lamports`: Числове представлення балансу облікового запису в
  [лампортах](/docs/terminology.md#lamport), найменшій одиниці SOL (1 SOL = 1
  мільярд лампортів).
- `owner`: Вказує публічний ключ (Program ID) програми, яка володіє обліковим
  записом.

Як ключова частина моделі облікових записів Solana, кожен обліковий запис у
Solana має визначеного "власника", а саме програму. Тільки програма, зазначена
як власник облікового запису, може змінювати дані, що зберігаються в обліковому
записі, або знімати баланс лампортів. Важливо зазначити, що, хоча тільки власник
може знімати баланс, будь-хто може збільшити баланс.

> Для зберігання даних у ланцюжку потрібно передати певну кількість SOL до
> облікового запису. Кількість, що передається, пропорційна розміру даних, що
> зберігаються в обліковому записі. Ця концепція зазвичай називається "орендою".
> Однак, ви можете розглядати "оренду" швидше як "депозит", оскільки SOL,
> виділені для облікового запису, можуть бути повністю відновлені при закритті
> облікового запису.

## Вбудовані програми

Solana містить невелику кількість вбудованих програм, які є частиною реалізації
валідатора і забезпечують різні основні функціональності для мережі. Ви можете
знайти повний список вбудованих програм
[тут](https://docs.anza.xyz/runtime/programs).

При розробці користувацьких програм на Solana ви часто будете взаємодіяти з
двома вбудованими програмами: Системною Програмою і Завантажувачем BPF.

### Системна Програма

За замовчуванням усі нові облікові записи належать
[Системній Програмі](https://github.com/solana-labs/solana/tree/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src).
Системна Програма виконує кілька ключових завдань, таких як:

- [Створення нового облікового запису](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L145):
  Тільки Системна Програма може створювати нові облікові записи.
- [Виділення простору](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L70):
  Встановлює обсяг пам'яті для поля даних кожного облікового запису.
- [Призначення власника програми](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L112):
  Після створення облікового запису Системною Програмою вона може перепризначити
  власника програми іншому обліковому запису програми. Це спосіб, за яким
  користувацькі програми беруть у власність нові облікові записи, створені
  Системною Програмою.

У Solana "гаманець" просто є обліковим записом, який належить Системній
Програмі. Баланс лампортів у гаманці є кількістю SOL, що належать обліковому
запису.

![Системний Обліковий Запис](/assets/docs/core/accounts/system-account.svg)

> Тільки облікові записи, що належать Системній Програмі, можуть
> використовуватися як платники комісій за транзакції.

### Завантажувач BPF

[Завантажувач BPF](https://github.com/solana-labs/solana/tree/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/bpf_loader/src)
є програмою, яка призначена як "власник" усіх інших програм у мережі, крім
Вбудованих Програм. Він відповідає за розгортання, оновлення та виконання
користувацьких програм.

## Системні Облікові Записи

Системні облікові записи - це спеціальні облікові записи, розташовані за
попередньо визначеними адресами, які надають доступ до даних про стан кластера
мережі. Ці облікові записи динамічно оновлюються даними про кластер мережі. Ви
можете знайти повний список Системних Облікових Записів
[тут](https://docs.anza.xyz/runtime/sysvars).

## Користувацькі Програми

У Solana "смартконтракти" називаються [програмами](/docs/core/programs.md).
Програма є обліковим записом, який містить виконуваний код, і позначається
прапорцем "виконуваний", який встановлено в значення "true".

Для детального пояснення процесу розгортання програми, зверніться до сторінки
[Розгортання Програм](/docs/programs/deploying.md) цієї документації.

### Обліковий Запис Програми

Коли нові програми
[розгортаються](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/bpf_loader/src/lib.rs#L498)
на Solana, технічно створюються три окремі облікові записи:

- **Обліковий Запис Програми**: Основний обліковий запис, який представляє
  програму в ланцюжку. Цей обліковий запис зберігає адресу виконуваного
  облікового запису даних (який зберігає зкомпільований код програми) і право на
  оновлення програми (адреса, яка має дозвіл на внесення змін до програми).
- **Виконуваний Обліковий Запис Програми**: Обліковий запис, який містить
  виконуваний байт-код програми.
- **Буферний Обліковий Запис**: Тимчасовий обліковий запис, який зберігає
  байт-код під час активного розгортання або оновлення програми. Після
  завершення процесу дані передаються до Виконуваного Облікового Запису
  Програми, а буферний обліковий запис закривається.

Наприклад, ось посилання на Solana Explorer для Програмного Розширення Токенів
[Обліковий Запис Програми](https://explorer.solana.com/address/TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb)
і його відповідний
[Виконуваний Обліковий Запис Програми](https://explorer.solana.com/address/DoU57AYuPFu2QU514RktNPG22QhApEjnKxnBcu4BHDTY).

![Облікові Записи Програми та Виконуваних Даних](/assets/docs/core/accounts/program-account-expanded.svg)

Для простоти ви можете вважати "Обліковий Запис Програми" як саму програму.

![Обліковий Запис Програми](/assets/docs/core/accounts/program-account-simple.svg)

> Адреса "Облікового Запису Програми" зазвичай називається "ID Програми", який
> використовується для виклику програми.

### Обліковий Запис Даних

Програми Solana є "безстанними", тобто облікові записи програм містять лише
виконуваний байт-код програми. Для зберігання та модифікації додаткових даних
необхідно створювати нові облікові записи. Ці облікові записи зазвичай
називаються "обліковими записами даних".

Облікові записи даних можуть зберігати будь-які довільні дані, визначені в коді
програми-власника.

![Обліковий Запис Даних](/assets/docs/core/accounts/data-account.svg)

Зверніть увагу, що тільки
[Системна Програма](/docs/core/accounts.md#system-program) може створювати нові
облікові записи. Після створення облікового запису Системною Програмою вона може
потім передати власність нового облікового запису іншій програмі.

Іншими словами, створення облікового запису даних для користувацької програми
вимагає двох кроків:

1. Виклик Системної Програми для створення облікового запису, яка потім передає
   власність користувацькій програмі
2. Виклик користувацької програми, яка тепер володіє обліковим записом, для
   ініціалізації даних облікового запису, як це визначено в коді програми

Цей процес створення облікового запису даних часто абстрагується як єдиний крок,
але корисно розуміти підлеглий процес.
