---
title: "Обмеження"
sidebarSortOrder: 6
---

Розробка програм на блокчейні Solana має деякі вроджені обмеження. Нижче
наведено список поширених обмежень, з якими ви можете зіткнутися.

## Бібліотеки Rust

Оскільки програми Rust на блокчейні повинні бути детермінованими і виконуватись
у середовищі з обмеженими ресурсами та одночасною обробкою, вони мають деякі
обмеження щодо використання бібліотек.

Програми Rust на блокчейні підтримують більшість бібліотек Rust, таких як
libstd, libcore, liballoc, а також багато сторонніх бібліотек.

Проте існують певні обмеження через обмежені ресурси середовища та необхідність
детермінованості:

- Немає доступу до:
  - `rand`
  - `std::fs`
  - `std::net`
  - `std::future`
  - `std::process`
  - `std::sync`
  - `std::task`
  - `std::thread`
  - `std::time`
- Обмежений доступ до:
  - `std::hash`
  - `std::os`
- Використання Bincode є дуже ресурсомістким і його слід уникати.
- Форматування рядків також є ресурсомістким і повинно бути мінімізоване.
- Відсутня підтримка для `println!` та `print!`, замість цього використовуйте
  макрос
  [`msg!`](https://github.com/solana-labs/solana/blob/d9b0fc0e3eec67dfe4a97d9298b15969b2804fab/sdk/program/src/log.rs#L33).
- Під час виконання встановлено обмеження на кількість інструкцій, які програма
  може виконати під час обробки однієї інструкції. Дивіться
  [бюджет обчислень](/docs/core/fees.md#compute-budget) для більш детальної
  інформації.

## Бюджет обчислень

Для запобігання зловживанню обчислювальними ресурсами блокчейну кожна транзакція
отримує [бюджет обчислень](/docs/terminology.md#compute-budget). Перевищення
цього бюджету призведе до провалу транзакції.

Дивіться документацію про
[обмеження обчислень](/docs/core/fees.md#compute-budget) для більш детальної
інформації.

## Глибина стеку викликів — помилка `CallDepthExceeded`

Програми Solana мають обмежену глибину стеку викликів до **64 кадрів**.

Якщо програма перевищує дозволену глибину стеку викликів, вона отримує помилку
`CallDepthExceeded`.

## Глибина викликів CPI — помилка `CallDepth`

Перехресні виклики між програмами дозволяють програмам викликати інші програми
безпосередньо, але наразі глибина обмежена до `4`.

Якщо програма перевищує дозволену
[глибину викликів між програмами](/docs/core/cpi.md), вона отримує помилку
`CallDepth`.

## Підтримка типів float у Rust

Програми підтримують обмежений набір операцій із типами float у Rust. Якщо
програма намагається використовувати операцію із float, яка не підтримується,
виконання викликає помилку про нерозв’язаний символ.

Операції із float виконуються через програмні бібліотеки (LLVM's float
built-ins) і споживають більше обчислювальних одиниць, ніж операції з цілими
числами. Загалом рекомендується використовувати фіксовану точку там, де це
можливо.

[Математичні тести Solana Program Library](https://github.com/solana-labs/solana-program-library/tree/master/libraries/math)
демонструють продуктивність деяких математичних операцій. Для запуску тесту
синхронізуйте репозиторій і виконайте:

```shell
cargo test-sbf -- --nocapture --test-threads=1
```

Недавні результати показують, що операції із float споживають більше інструкцій
порівняно з еквівалентами для цілих чисел. Реалізації з фіксованою точкою також
будуть менш ресурсомісткими, ніж float:

```text
          u64   f32
Multiply    8   176
Divide      9   219
```

## Статичні змінні, які можна змінювати

Спільні об’єкти програм не підтримують змінювані спільні дані. Програми спільно
використовують один і той самий код та дані лише для читання, що означає, що
розробники не повинні включати статичні змінювані або глобальні змінні в
програми. У майбутньому може бути додано механізм копіювання при записі для
підтримки змінюваних даних.

## Ділення зі знаком

Набір інструкцій SBF не підтримує ділення зі знаком.
